(this.webpackJsonpwithme_prototype=this.webpackJsonpwithme_prototype||[]).push([[0],{12:function(e,t,n){},19:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(4),s=n.n(a),i=(n(12),n(5)),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))},u=n(0);s.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(i.a,{})}),document.getElementById("root")),o()},5:function(e,t,n){"use strict";(function(e){var r=n(3),c=n.n(r),a=n(6),s=n(7),i=n(1),o=(n(19),n(0)),u="withme.heavyrisem.xyz";t.a=function(){var t=Object(i.useState)(),n=Object(s.a)(t,2),r=n[0],l=n[1],d=Object(i.useRef)(null),h=Object(i.useRef)(null);function p(){return(p=Object(a.a)(c.a.mark((function t(){var n,r,a,s,i,o,p,f,b;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!d.current||!h.current){t.next=37;break}return d.current.pause(),l("Loading ..."),(r=document.createElement("canvas")).width=d.current.videoWidth,r.height=d.current.videoHeight,null===(n=r.getContext("2d"))||void 0===n||n.drawImage(d.current,0,0),a=atob(r.toDataURL("image/png").split(",")[1]),s=new Blob([new Uint8Array(e.from(a,"binary"))],{type:"image/png"}),(i=new FormData).append("file",s,"image.png"),t.prev=11,t.next=14,fetch("https://".concat(u,"/ocr"),{method:"POST",headers:{},body:i});case 14:return o=t.sent,t.next=17,o.json();case 17:if(!(p=t.sent).result){t.next=30;break}return l(p.result),console.log(p.result),t.next=23,fetch("https://".concat(u,"/tts"),{method:"POST",body:JSON.stringify({text:p.result})});case 23:return f=t.sent,t.next=26,f.json();case 26:(b=t.sent).result?(h.current.src="data:audio/mp3;base64,"+b.result,h.current.play()):l(b.detail),t.next=31;break;case 30:l(p.detail);case 31:d.current.play(),t.next=37;break;case 34:t.prev=34,t.t0=t.catch(11),l(t.t0);case 37:case"end":return t.stop()}}),t,null,[[11,34]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){if(!navigator.mediaDevices)return;navigator.mediaDevices.getUserMedia({audio:!1,video:{width:{ideal:9999},height:{ideal:9999},facingMode:"environment"}}).then((function(e){d.current&&(d.current.srcObject=e,d.current.onloadedmetadata=function(e){d.current&&d.current.play()})})).catch((function(e){console.log(e),alert("Err"+e)}))}),[]),Object(o.jsxs)("div",{className:"Comp",children:[Object(o.jsx)("video",{ref:d,playsInline:!0}),Object(o.jsxs)("div",{className:"Bottom",children:[Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("span",{className:"TextResult",children:[r,Object(o.jsx)("br",{}),Object(o.jsx)("audio",{playsInline:!0,controls:!0,ref:h})]})}),Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"Shutter",onClick:function(){return p.apply(this,arguments)},children:Object(o.jsx)("div",{className:"ShutterBall"})})})]})]})}}).call(this,n(13).Buffer)}},[[21,1,2]]]);
//# sourceMappingURL=main.7f17e357.chunk.js.map